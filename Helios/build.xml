<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- WARNING: Eclipse auto-generated file.
              Any modifications will be overwritten.
              To include a user specific buildfile here, simply create one in the same
              directory with the processing instruction <?eclipse.ant.import?>
              as the first entry and export the buildfile again. -->
<project basedir="." default="build" name="Helios">
    <property environment="env"/>
    <property name="debuglevel" value="source,lines,vars"/>
    <property name="target" value="1.6"/>
    <property name="source" value="1.6"/>
    <path id="Helios.classpath">
		<pathelement location="bin"/>
        <pathelement location="/usr/share/java"/>
    	<pathelement location="/usr/share/java/ant.jar"/>
    	<pathelement location="/usr/share/java/ant-launcher.jar"/>
    	<pathelement location="/usr/share/java/commons-launcher.jar"/>
        <pathelement location="/usr/share/java/log4j.jar"/>
        <pathelement location="/usr/share/java/commons-logging.jar"/>
        <pathelement location="/usr/share/java/commons-lang.jar"/>
		<pathelement location="/usr/share/java/java3d"/>
		<pathelement location="/usr/share/java/java3d/j3dcore.jar"/>
		<pathelement location="/usr/share/java/java3d/j3dutils.jar"/>
		<pathelement location="/usr/share/java/java3d/vecmath.jar"/>
        <pathelement location="lib/jackcess-1.2.1.jar"/>
        <pathelement location="lib/jxl.jar"/>
		<pathelement location="lib/drej.jar"/>
		<pathelement location="/usr/share/java/junit.jar"/>
		<pathelement location="lib/jtds-1.2.5.jar"/>
		<pathelement location="lib/mail.jar"/>
    </path>
	<path id="Helios.junit.classpath">
		<pathelement location="bin"/>
        <pathelement location="/usr/share/java"/>
    	<pathelement location="/usr/share/java/ant.jar"/>
    	<pathelement location="/usr/share/java/ant-launcher.jar"/>
    	<pathelement location="/usr/share/java/commons-launcher.jar"/>
        <pathelement location="/usr/share/java/log4j.jar"/>
        <pathelement location="/usr/share/java/commons-logging.jar"/>
        <pathelement location="/usr/share/java/commons-lang.jar"/>
		<pathelement location="/usr/share/java/java3d"/>
		<pathelement location="/usr/share/java/java3d/j3dcore.jar"/>
		<pathelement location="/usr/share/java/java3d/j3dutils.jar"/>
		<pathelement location="/usr/share/java/java3d/vecmath.jar"/>
        <pathelement location="lib/jackcess-1.2.1.jar"/>
        <pathelement location="lib/jxl.jar"/>
		<pathelement location="lib/drej.jar"/>
		<pathelement location="/usr/share/java/junit.jar"/>
		<pathelement location="lib/jtds-1.2.5.jar"/>
		<pathelement location="lib/mail.jar"/>
	</path>
	<pathconvert property="mf.classpath" pathsep=" ">
   	 	<path refid="Helios.classpath" />
  	</pathconvert>
	<pathconvert property="junit.classpath" pathsep=" ">
   	 	<path refid="Helios.junit.classpath" />
  	</pathconvert>

    <target name="init">
        <mkdir dir="bin"/>
        <copy includeemptydirs="false" todir="bin">
            <fileset dir="src">
                <exclude name="**/*.launch"/>
                <exclude name="**/*.java"/>
            </fileset>
        </copy>
    </target>
    <target name="clean">
        <delete dir="bin"/>
		<mkdir dir="bin"/>
    </target>
    <target depends="clean" name="cleanall"/>
    <target depends="build-project,jar" name="build">
		<exec executable="/bin/date" />
	</target>
    <target depends="init" name="build-project">
        <echo message="${ant.project.name}: ${ant.file}"/>
        <javac debug="true" debuglevel="${debuglevel}" destdir="bin" source="${source}" target="${target}" verbose="on">
            <src path="src"/>
            <classpath refid="Helios.junit.classpath"/>
        </javac>
    </target>
    <target name="ConstantsTest">
        <mkdir dir="${junit.output.dir}"/>
        <junit fork="yes" printsummary="withOutAndErr">
            <formatter type="xml"/>
            <test name="test.ConstantsTest" todir="${junit.output.dir}"/>
            <classpath refid="Helios.classpath"/>
        </junit>
    </target>
    <target name="MSAccessDBWriteTester">
        <java classname="test.MSAccessDBWriteTester" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="TopCallDrivers">
        <java classname="helios.MSAccess.TopCallDrivers" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="DocumentationRate">
        <java classname="helios.MSAccess.DocumentationRate" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="Constants">
        <java classname="constants.Constants" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="Average">
        <java classname="helios.MSAccess.Average" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="Report">
        <java classname="helios.Report" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="QueryResults">
        <java classname="database.connection.MSAccess.QueryResults" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="FileConnection">
        <java classname="database.connection.MSAccess.FileConnection" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="DateParser">
        <java classname="util.DateParser" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="RemoteConnection">
        <java classname="database.connection.SQL.RemoteConnection" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
    <target name="ThreadPool">
        <java classname="util.ThreadPool" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
	<target name="MailUpdater">
        <java classname="mail.MailUpdater" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
	<target name="Roster">
        <java classname="helios.SQL.Roster" failonerror="true" fork="yes">
            <classpath refid="Helios.classpath"/>
        </java>
    </target>
	<target name="testsuite" depends="build-project">
		<java classname="test.HeliosTestSuite" failonerror="true" fork="yes">
			<classpath refid="Helios.junit.classpath"/>
		</java>
	</target>
	<target name="jar" depends="build-project" >
		<jar description="Jar for Tomcat Deployment" destfile="Helios.jar" basedir="bin" includes="**/*.class"><!-- includesfile="conf/log4j.properties">-->
    	<manifest>
    		<attribute name="Awesome" value="true"/>
     		<attribute name="Main-Class" value="database.connection.MSAccess.Shell"/>
			<attribute name="Class-Path" value="${mf.classpath}"/>
		</manifest>
  		</jar>
  </target>
  	<target name="test" depends="build-project">
		<junit failureProperty="test.failure">
      		<classpath refid="Helios.junit.classpath" />
			
			<!--two formatters, one for ant output, the other for the test files-->
			<formatter type="plain" usefile="false" />
			<formatter type="plain" usefile="true" extension="" />
						
			<!--
			<test name="test.reports.SQL.DocumentationRateTest" todir="test"/>
			<test name="test.reports.SQL.TopCallDriversTest" todir="test"/>
			<test name="test.reports.SQL.CaseUpdatedRatioTest" todir="test"/>
			<test name="test.reports.SQL.SalesStackRankTest" todir="test"/>
			<test name="test.MSAccessFileConnectionTest" todir="test"/>
			-->
			
			<!-- framework constants -->
			<test name="test.ConstantsTest" todir="test"/>
			
			<!-- date parsing and validation -->
			<test name="test.DateParserTest" todir="test"/>
			
			<!--statistics -->
			<test name="test.statistics.BasicStatisticsTest" todir="test"/>
			
			<!-- team buckets -->
			
			<!-- user buckets -->
			
			<!-- SQL Reports -->
			<test name="test.reports.SQL.RosterTest" todir="test"/>
			<test name="test.reports.SQL.AverageOrderValueTest" todir="test"/>
			<test name="test.reports.SQL.AverageOrderValueAgentTest" todir="test"/>
			<test name="test.reports.SQL.NoSaleDriversTest" todir="test"/>
			<test name="test.reports.SQL.TopCaseDriversTest" todir="test"/>
			<test name="test.reports.SQL.RealtimeSalesTest" todir="test"/>
			<test name="test.reports.SQL.RefundAmountTest" todir="test"/>
			<test name="test.reports.SQL.RefundTotalsTest" todir="test"/>
			<test name="test.reports.SQL.TopRefundReasonsTest" todir="test"/>
			<test name="test.reports.SQL.LMICSATTest" todir="test"/>
			<test name="test.reports.SQL.IVRCSATTest" todir="test"/>
			
    	</junit>

		<copy includeemptydirs="true" todir="../../../test/">
        	<fileset dir="test">
        	</fileset>
        </copy>
    	<fail message="test failed" if="test.failure" />
  </target>
 	<target name="analysis" depends="build-project">
 		<exec executable="/opt/tomcat/webapps/birt-viewer/WEB-INF/lib/Helios/scripts/generateAnalyses.pl" failonerror ="true" 
		error="/opt/tomcat/webapps/birt-viewer/WEB-INF/lib/Helios/analysis/output" />
	</target>
	<target name="valgrind">
		
		<!-- valgrindy stuff -->
		
	</target>
  <target name="javadoc" depends="build-project">
  		<mkdir dir="doc/"/>
        <javadoc access="private" author="true" destdir="doc" nodeprecated="false" nodeprecatedlist="false" noindex="false" nonavbar="false" notree="false" 
			packagenames="*" 
			source="1.6" sourcepath="src" splitindex="true" use="true" version="true" useexternalfile="true" >
			
			<classpath refid="Helios.junit.classpath"/>
			
			<link href="http://download.oracle.com/javase/6/docs/api/"/>
			<link href="http://jackcess.sourceforge.net/apidocs/"/>
			<link href="http://jxl.sourceforge.net/javadoc/"/>
		</javadoc>
  </target>
  <target name="forcedeploy" depends="build-project,jar,javadoc">

		<copy includeemptydirs="true" todir="../../../doc_Helios/">
            <fileset dir="doc">
        	</fileset>
        </copy>
		
		<copy includeemptydirs="true" todir="../../../test/">
        	<fileset dir="test">
        	</fileset>
        </copy>
		
		<!--<symlink action="single" resource="Helios.jar" link="../Helios.jar" overwrite="true" failonerror="true" />-->
		<copy file="Helios.jar" todir="../" verbose="on" />
		<!--<copy file="Helios.jar" todir="../" verbose="on" />-->
		<copy file="lib/jxl.jar" todir="../" verbose="on" />
		<copy file="lib/jackcess-1.2.1.jar" todir="../" verbose="on" />
		<copy file="lib/jtds-1.2.5.jar" todir="../" verbose="on" />
  		<copy file="/usr/share/java/log4j.jar" todir="../" verbose="on" />
		<exec executable="/opt/tomcat/webapps/birt-viewer/WEB-INF/lib/Helios/scripts/tomcatRestart.pl" failonerror ="true"/>
  		<exec executable="/bin/touch" failonerror ="true" >
  			<arg value = "./log/database.log"/>
  		</exec>
		<exec executable="/bin/date" />
  		
  </target>
  <target name ="deploy" depends="forcedeploy,test,analysis">
  	
	</target>
</project>
